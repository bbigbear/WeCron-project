{% extends "remind/remind_base.html" %}

{% load humanize %}

{% block page %}
<!-- Page, "data-page" contains page name -->
<form data-page="update" class="page navbar-fixed toolbar-fixed" method="post" id="remind-update" action="{{ remind.get_absolute_url }}">

<!-- Top Navbar-->
<div class="navbar">
  <div class="navbar-inner">
      <div class="left">
        <a href="{% url "remind_list" %}" class="link icon-only">
            <i class="fa fa-arrow-left"></i>
        </a>
      </div>
      {% if remind.owner == user %}
      <div class="right">
        <button type="submit" class="button no-border"><i class="icon weui_icon_success_no_circle"></i></button>
      </div>
      {% endif %}
  </div>
</div>

    <!-- Scrollable page content -->
    <div class="page-content">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <ul class="list-block media-list">
            <li class="item-content">
                <div class="item-media"><i class="fa fa-calendar-check-o fa-lg color-gray"></i></div>
                <div class="item-inner">
                    <div class="item-input">
                        <input id="{{ form.event.id_for_label }}" type="text" placeholder="请输入要提醒的事件" maxlength="120" required name="{{ form.event.html_name }}"
                               {% ifnotequal remind.owner user %}readonly{% endifnotequal %} value="{{ remind.event }}">
                    </div>
                </div>
                {% if form.event.errors %}
                <div class="item-after"><i data-popover=".popover-event" class="link open-popover weui_icon_warn"></i></div>
                {% endif %}
            </li>
            <li class="item-content">
                <div class="item-media"><i class="fa fa-clock-o fa-lg color-gray"></i></div>
                <div class="item-inner">
                    <div class="item-input">
                        <input id="{{ form.time.id_for_label }}" type="datetime-local" placeholder="请输入提醒时间" maxlength="120" required name="{{ form.time.html_name }}"
                               {% ifnotequal remind.owner user %}readonly{% endifnotequal %} value="{{ remind.time|date:"Y-m-d\TH:i:s" }}">
                    </div>
                </div>
                {% if form.time.errors %}
                <div class="item-after"><i data-popover=".popover-time" class="link open-popover weui_icon_warn"></i></div>
                {% endif %}
            </li>
            <li class="item-content">
                <div class="item-media"><i class="fa fa-sticky-note-o fa-lg color-gray"></i></div>
                <div class="item-inner">
                    <div class="item-input">
{#                    <input id="{{ form.desc.id_for_label }}" type="text" placeholder="请输入备注(可选)" name="{{ form.desc.html_name }}" value="{{ remind.desc }}">#}
                        <textarea class="resizable" id="{{ form.desc.id_for_label }}" placeholder="请输入备注(可选)" rows="3"
                                  {% ifnotequal remind.owner user %}readonly{% endifnotequal %} name="{{ form.desc.html_name }}">{{ remind.desc }}</textarea>
                    </div>
                </div>
                {% if form.desc.errors %}
                <div class="item-after"><i data-popover=".popover-desc" class="link open-popover weui_icon_warn"></i></div>
                {% endif %}
            </li>
        </ul>
    </div>
</form>
{% endblock page %}

{% block popover %}
    {% if form.event.errors %}
        <div class="popover popover-event modal-in">
            <!-- Popover's angle arrow -->
            <div class="popover-angle on-top"></div>
            <!-- Popover content -->
            <div class="popover-inner content-block">
                {% for error in form.event.errors %}
                    <p>{{ error|escape }}</p>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {% if form.time.errors %}
        <div class="popover popover-time modal-in">
            <!-- Popover's angle arrow -->
            <div class="popover-angle on-top"></div>
            <!-- Popover content -->
            <div class="popover-inner content-block">
                {% for error in form.time.errors %}
                    <p>{{ error|escape }}</p>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {% if form.desc.errors %}
        <div class="popover popover-desc modal-in">
            <!-- Popover's angle arrow -->
            <div class="popover-angle on-top"></div>
            <!-- Popover content -->
            <div class="popover-inner content-block">
                {% for error in form.desc.errors %}
                    <p>{{ error|escape }}</p>
                {% endfor %}
            </div>
        </div>
    {% endif %}
{% endblock popover %}
